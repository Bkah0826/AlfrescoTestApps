/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { Injectable } from '@angular/core';
import { Subject, from, throwError } from 'rxjs';
import { AlfrescoApiService } from './alfresco-api.service';
import { SearchConfigurationService } from './search-configuration.service';
import * as i0 from "@angular/core";
import * as i1 from "./alfresco-api.service";
import * as i2 from "./search-configuration.service";
var SearchService = /** @class */ (function () {
    function SearchService(apiService, searchConfigurationService) {
        this.apiService = apiService;
        this.searchConfigurationService = searchConfigurationService;
        this.dataLoaded = new Subject();
    }
    /**
     * Gets a list of nodes that match the given search criteria.
     * @param term Term to search for
     * @param options Options for delivery of the search results
     * @returns List of nodes resulting from the search
     */
    /**
     * Gets a list of nodes that match the given search criteria.
     * @param {?} term Term to search for
     * @param {?=} options Options for delivery of the search results
     * @return {?} List of nodes resulting from the search
     */
    SearchService.prototype.getNodeQueryResults = /**
     * Gets a list of nodes that match the given search criteria.
     * @param {?} term Term to search for
     * @param {?=} options Options for delivery of the search results
     * @return {?} List of nodes resulting from the search
     */
    function (term, options) {
        var _this = this;
        /** @type {?} */
        var promise = this.apiService.getInstance().core.queriesApi.findNodes(term, options);
        promise.then((/**
         * @param {?} nodePaging
         * @return {?}
         */
        function (nodePaging) {
            _this.dataLoaded.next(nodePaging);
        })).catch((/**
         * @param {?} err
         * @return {?}
         */
        function (err) { return _this.handleError(err); }));
        return from(promise);
    };
    /**
     * Performs a search.
     * @param searchTerm Term to search for
     * @param maxResults Maximum number of items in the list of results
     * @param skipCount Number of higher-ranked items to skip over in the list
     * @returns List of search results
     */
    /**
     * Performs a search.
     * @param {?} searchTerm Term to search for
     * @param {?} maxResults Maximum number of items in the list of results
     * @param {?} skipCount Number of higher-ranked items to skip over in the list
     * @return {?} List of search results
     */
    SearchService.prototype.search = /**
     * Performs a search.
     * @param {?} searchTerm Term to search for
     * @param {?} maxResults Maximum number of items in the list of results
     * @param {?} skipCount Number of higher-ranked items to skip over in the list
     * @return {?} List of search results
     */
    function (searchTerm, maxResults, skipCount) {
        var _this = this;
        /** @type {?} */
        var searchQuery = Object.assign(this.searchConfigurationService.generateQueryBody(searchTerm, maxResults, skipCount));
        /** @type {?} */
        var promise = this.apiService.getInstance().search.searchApi.search(searchQuery);
        promise.then((/**
         * @param {?} nodePaging
         * @return {?}
         */
        function (nodePaging) {
            _this.dataLoaded.next(nodePaging);
        })).catch((/**
         * @param {?} err
         * @return {?}
         */
        function (err) { return _this.handleError(err); }));
        return from(promise);
    };
    /**
     * Performs a search with its parameters supplied by a QueryBody object.
     * @param queryBody Object containing the search parameters
     * @returns List of search results
     */
    /**
     * Performs a search with its parameters supplied by a QueryBody object.
     * @param {?} queryBody Object containing the search parameters
     * @return {?} List of search results
     */
    SearchService.prototype.searchByQueryBody = /**
     * Performs a search with its parameters supplied by a QueryBody object.
     * @param {?} queryBody Object containing the search parameters
     * @return {?} List of search results
     */
    function (queryBody) {
        var _this = this;
        /** @type {?} */
        var promise = this.apiService.getInstance().search.searchApi.search(queryBody);
        promise.then((/**
         * @param {?} nodePaging
         * @return {?}
         */
        function (nodePaging) {
            _this.dataLoaded.next(nodePaging);
        })).catch((/**
         * @param {?} err
         * @return {?}
         */
        function (err) { return _this.handleError(err); }));
        return from(promise);
    };
    /**
     * @private
     * @param {?} error
     * @return {?}
     */
    SearchService.prototype.handleError = /**
     * @private
     * @param {?} error
     * @return {?}
     */
    function (error) {
        return throwError(error || 'Server error');
    };
    SearchService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    SearchService.ctorParameters = function () { return [
        { type: AlfrescoApiService },
        { type: SearchConfigurationService }
    ]; };
    /** @nocollapse */ SearchService.ngInjectableDef = i0.defineInjectable({ factory: function SearchService_Factory() { return new SearchService(i0.inject(i1.AlfrescoApiService), i0.inject(i2.SearchConfigurationService)); }, token: SearchService, providedIn: "root" });
    return SearchService;
}());
export { SearchService };
if (false) {
    /** @type {?} */
    SearchService.prototype.dataLoaded;
    /**
     * @type {?}
     * @private
     */
    SearchService.prototype.apiService;
    /**
     * @type {?}
     * @private
     */
    SearchService.prototype.searchConfigurationService;
}
/**
 * @record
 */
export function SearchOptions() { }
if (false) {
    /**
     * The number of entities that exist in the collection before those included in this list.
     * @type {?|undefined}
     */
    SearchOptions.prototype.skipCount;
    /**
     * The maximum number of items to return in the list.
     * @type {?|undefined}
     */
    SearchOptions.prototype.maxItems;
    /**
     * The id of the node to start the search from. Supports the aliases -my-, -root- and -shared-.
     * @type {?|undefined}
     */
    SearchOptions.prototype.rootNodeId;
    /**
     * Restrict the returned results to only those of the given node type and its sub-types.
     * @type {?|undefined}
     */
    SearchOptions.prototype.nodeType;
    /**
     * Return additional information about the node. The available optional fields are:
     * `allowableOperations`, `aspectNames`, `isLink`, `isLocked`, `path` and `properties`.
     * @type {?|undefined}
     */
    SearchOptions.prototype.include;
    /**
     * String to control the order of the entities returned in a list. You can use this
     * parameter to sort the list by one or more fields. Each field has a default sort order,
     * which is normally ascending order (but see the JS-API docs to check if any fields used
     * in a method have a descending default search order). To sort the entities in a specific
     * order, you can use the "ASC" and "DESC" keywords for any field.
     * @type {?|undefined}
     */
    SearchOptions.prototype.orderBy;
    /**
     * List of field names. You can use this parameter to restrict the fields returned within
     * a response if, for example, you want to save on overall bandwidth. The list applies to a
     * returned individual entity or entries within a collection. If the API method also supports
     * the `include` parameter, then the fields specified in the include parameter are returned in
     * addition to those specified in the fields parameter.
     * @type {?|undefined}
     */
    SearchOptions.prototype.fields;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxmcmVzY28vYWRmLWNvcmUvIiwic291cmNlcyI6WyJzZXJ2aWNlcy9zZWFyY2guc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBYyxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUM3RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUM1RCxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQzs7OztBQUU1RTtJQU9JLHVCQUFvQixVQUE4QixFQUM5QiwwQkFBc0Q7UUFEdEQsZUFBVSxHQUFWLFVBQVUsQ0FBb0I7UUFDOUIsK0JBQTBCLEdBQTFCLDBCQUEwQixDQUE0QjtRQUgxRSxlQUFVLEdBQXdCLElBQUksT0FBTyxFQUFFLENBQUM7SUFJaEQsQ0FBQztJQUVEOzs7OztPQUtHOzs7Ozs7O0lBQ0gsMkNBQW1COzs7Ozs7SUFBbkIsVUFBb0IsSUFBWSxFQUFFLE9BQXVCO1FBQXpELGlCQVFDOztZQVBTLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUM7UUFFdEYsT0FBTyxDQUFDLElBQUk7Ozs7UUFBQyxVQUFDLFVBQXNCO1lBQ2hDLEtBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3JDLENBQUMsRUFBQyxDQUFDLEtBQUs7Ozs7UUFBQyxVQUFDLEdBQUcsSUFBSyxPQUFBLEtBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEVBQXJCLENBQXFCLEVBQUMsQ0FBQztRQUV6QyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN6QixDQUFDO0lBRUQ7Ozs7OztPQU1HOzs7Ozs7OztJQUNILDhCQUFNOzs7Ozs7O0lBQU4sVUFBTyxVQUFrQixFQUFFLFVBQWtCLEVBQUUsU0FBaUI7UUFBaEUsaUJBU0M7O1lBUlMsV0FBVyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLDBCQUEwQixDQUFDLGlCQUFpQixDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsU0FBUyxDQUFDLENBQUM7O1lBQ2pILE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQztRQUVsRixPQUFPLENBQUMsSUFBSTs7OztRQUFDLFVBQUMsVUFBc0I7WUFDaEMsS0FBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDckMsQ0FBQyxFQUFDLENBQUMsS0FBSzs7OztRQUFDLFVBQUMsR0FBRyxJQUFLLE9BQUEsS0FBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBckIsQ0FBcUIsRUFBQyxDQUFDO1FBRXpDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFFRDs7OztPQUlHOzs7Ozs7SUFDSCx5Q0FBaUI7Ozs7O0lBQWpCLFVBQWtCLFNBQW9CO1FBQXRDLGlCQVFDOztZQVBTLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQztRQUVoRixPQUFPLENBQUMsSUFBSTs7OztRQUFDLFVBQUMsVUFBc0I7WUFDaEMsS0FBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDckMsQ0FBQyxFQUFDLENBQUMsS0FBSzs7OztRQUFDLFVBQUMsR0FBRyxJQUFLLE9BQUEsS0FBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBckIsQ0FBcUIsRUFBQyxDQUFDO1FBRXpDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3pCLENBQUM7Ozs7OztJQUVPLG1DQUFXOzs7OztJQUFuQixVQUFvQixLQUFVO1FBQzFCLE9BQU8sVUFBVSxDQUFDLEtBQUssSUFBSSxjQUFjLENBQUMsQ0FBQztJQUMvQyxDQUFDOztnQkE5REosVUFBVSxTQUFDO29CQUNSLFVBQVUsRUFBRSxNQUFNO2lCQUNyQjs7OztnQkFMUSxrQkFBa0I7Z0JBQ2xCLDBCQUEwQjs7O3dCQXJCbkM7Q0FzRkMsQUEvREQsSUErREM7U0E1RFksYUFBYTs7O0lBRXRCLG1DQUFnRDs7Ozs7SUFFcEMsbUNBQXNDOzs7OztJQUN0QyxtREFBOEQ7Ozs7O0FBeUQ5RSxtQ0FvQ0M7Ozs7OztJQWxDRyxrQ0FBbUI7Ozs7O0lBR25CLGlDQUFrQjs7Ozs7SUFHbEIsbUNBQW9COzs7OztJQUdwQixpQ0FBa0I7Ozs7OztJQU1sQixnQ0FBbUI7Ozs7Ozs7OztJQVNuQixnQ0FBaUI7Ozs7Ozs7OztJQVNqQiwrQkFBa0IiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOb2RlUGFnaW5nLCBRdWVyeUJvZHkgfSBmcm9tICdAYWxmcmVzY28vanMtYXBpJztcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QsIGZyb20sIHRocm93RXJyb3IgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEFsZnJlc2NvQXBpU2VydmljZSB9IGZyb20gJy4vYWxmcmVzY28tYXBpLnNlcnZpY2UnO1xuaW1wb3J0IHsgU2VhcmNoQ29uZmlndXJhdGlvblNlcnZpY2UgfSBmcm9tICcuL3NlYXJjaC1jb25maWd1cmF0aW9uLnNlcnZpY2UnO1xuXG5ASW5qZWN0YWJsZSh7XG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFNlYXJjaFNlcnZpY2Uge1xuXG4gICAgZGF0YUxvYWRlZDogU3ViamVjdDxOb2RlUGFnaW5nPiA9IG5ldyBTdWJqZWN0KCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwaVNlcnZpY2U6IEFsZnJlc2NvQXBpU2VydmljZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIHNlYXJjaENvbmZpZ3VyYXRpb25TZXJ2aWNlOiBTZWFyY2hDb25maWd1cmF0aW9uU2VydmljZSkge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBsaXN0IG9mIG5vZGVzIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIHNlYXJjaCBjcml0ZXJpYS5cbiAgICAgKiBAcGFyYW0gdGVybSBUZXJtIHRvIHNlYXJjaCBmb3JcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciBkZWxpdmVyeSBvZiB0aGUgc2VhcmNoIHJlc3VsdHNcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIG5vZGVzIHJlc3VsdGluZyBmcm9tIHRoZSBzZWFyY2hcbiAgICAgKi9cbiAgICBnZXROb2RlUXVlcnlSZXN1bHRzKHRlcm06IHN0cmluZywgb3B0aW9ucz86IFNlYXJjaE9wdGlvbnMpOiBPYnNlcnZhYmxlPE5vZGVQYWdpbmc+IHtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuYXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLmNvcmUucXVlcmllc0FwaS5maW5kTm9kZXModGVybSwgb3B0aW9ucyk7XG5cbiAgICAgICAgcHJvbWlzZS50aGVuKChub2RlUGFnaW5nOiBOb2RlUGFnaW5nKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRhdGFMb2FkZWQubmV4dChub2RlUGFnaW5nKTtcbiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnIpKTtcblxuICAgICAgICByZXR1cm4gZnJvbShwcm9taXNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0gc2VhcmNoVGVybSBUZXJtIHRvIHNlYXJjaCBmb3JcbiAgICAgKiBAcGFyYW0gbWF4UmVzdWx0cyBNYXhpbXVtIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgbGlzdCBvZiByZXN1bHRzXG4gICAgICogQHBhcmFtIHNraXBDb3VudCBOdW1iZXIgb2YgaGlnaGVyLXJhbmtlZCBpdGVtcyB0byBza2lwIG92ZXIgaW4gdGhlIGxpc3RcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIHNlYXJjaCByZXN1bHRzXG4gICAgICovXG4gICAgc2VhcmNoKHNlYXJjaFRlcm06IHN0cmluZywgbWF4UmVzdWx0czogbnVtYmVyLCBza2lwQ291bnQ6IG51bWJlcik6IE9ic2VydmFibGU8Tm9kZVBhZ2luZz4ge1xuICAgICAgICBjb25zdCBzZWFyY2hRdWVyeSA9IE9iamVjdC5hc3NpZ24odGhpcy5zZWFyY2hDb25maWd1cmF0aW9uU2VydmljZS5nZW5lcmF0ZVF1ZXJ5Qm9keShzZWFyY2hUZXJtLCBtYXhSZXN1bHRzLCBza2lwQ291bnQpKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuYXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLnNlYXJjaC5zZWFyY2hBcGkuc2VhcmNoKHNlYXJjaFF1ZXJ5KTtcblxuICAgICAgICBwcm9taXNlLnRoZW4oKG5vZGVQYWdpbmc6IE5vZGVQYWdpbmcpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGF0YUxvYWRlZC5uZXh0KG5vZGVQYWdpbmcpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB0aGlzLmhhbmRsZUVycm9yKGVycikpO1xuXG4gICAgICAgIHJldHVybiBmcm9tKHByb21pc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgc2VhcmNoIHdpdGggaXRzIHBhcmFtZXRlcnMgc3VwcGxpZWQgYnkgYSBRdWVyeUJvZHkgb2JqZWN0LlxuICAgICAqIEBwYXJhbSBxdWVyeUJvZHkgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIHNlYXJjaCBwYXJhbWV0ZXJzXG4gICAgICogQHJldHVybnMgTGlzdCBvZiBzZWFyY2ggcmVzdWx0c1xuICAgICAqL1xuICAgIHNlYXJjaEJ5UXVlcnlCb2R5KHF1ZXJ5Qm9keTogUXVlcnlCb2R5KTogT2JzZXJ2YWJsZTxOb2RlUGFnaW5nPiB7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLmFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKS5zZWFyY2guc2VhcmNoQXBpLnNlYXJjaChxdWVyeUJvZHkpO1xuXG4gICAgICAgIHByb21pc2UudGhlbigobm9kZVBhZ2luZzogTm9kZVBhZ2luZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYXRhTG9hZGVkLm5leHQobm9kZVBhZ2luZyk7XG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyKSk7XG5cbiAgICAgICAgcmV0dXJuIGZyb20ocHJvbWlzZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogYW55KTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRocm93RXJyb3IoZXJyb3IgfHwgJ1NlcnZlciBlcnJvcicpO1xuICAgIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hPcHRpb25zIHtcbiAgICAvKiogVGhlIG51bWJlciBvZiBlbnRpdGllcyB0aGF0IGV4aXN0IGluIHRoZSBjb2xsZWN0aW9uIGJlZm9yZSB0aG9zZSBpbmNsdWRlZCBpbiB0aGlzIGxpc3QuICovXG4gICAgc2tpcENvdW50PzogbnVtYmVyO1xuXG4gICAgLyoqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4gaW4gdGhlIGxpc3QuICovXG4gICAgbWF4SXRlbXM/OiBudW1iZXI7XG5cbiAgICAvKiogVGhlIGlkIG9mIHRoZSBub2RlIHRvIHN0YXJ0IHRoZSBzZWFyY2ggZnJvbS4gU3VwcG9ydHMgdGhlIGFsaWFzZXMgLW15LSwgLXJvb3QtIGFuZCAtc2hhcmVkLS4gKi9cbiAgICByb290Tm9kZUlkPzogc3RyaW5nO1xuXG4gICAgLyoqIFJlc3RyaWN0IHRoZSByZXR1cm5lZCByZXN1bHRzIHRvIG9ubHkgdGhvc2Ugb2YgdGhlIGdpdmVuIG5vZGUgdHlwZSBhbmQgaXRzIHN1Yi10eXBlcy4gKi9cbiAgICBub2RlVHlwZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBub2RlLiBUaGUgYXZhaWxhYmxlIG9wdGlvbmFsIGZpZWxkcyBhcmU6XG4gICAgICogYGFsbG93YWJsZU9wZXJhdGlvbnNgLCBgYXNwZWN0TmFtZXNgLCBgaXNMaW5rYCwgYGlzTG9ja2VkYCwgYHBhdGhgIGFuZCBgcHJvcGVydGllc2AuXG4gICAgICovXG4gICAgaW5jbHVkZT86IHN0cmluZ1tdO1xuXG4gICAgLyoqXG4gICAgICogU3RyaW5nIHRvIGNvbnRyb2wgdGhlIG9yZGVyIG9mIHRoZSBlbnRpdGllcyByZXR1cm5lZCBpbiBhIGxpc3QuIFlvdSBjYW4gdXNlIHRoaXNcbiAgICAgKiBwYXJhbWV0ZXIgdG8gc29ydCB0aGUgbGlzdCBieSBvbmUgb3IgbW9yZSBmaWVsZHMuIEVhY2ggZmllbGQgaGFzIGEgZGVmYXVsdCBzb3J0IG9yZGVyLFxuICAgICAqIHdoaWNoIGlzIG5vcm1hbGx5IGFzY2VuZGluZyBvcmRlciAoYnV0IHNlZSB0aGUgSlMtQVBJIGRvY3MgdG8gY2hlY2sgaWYgYW55IGZpZWxkcyB1c2VkXG4gICAgICogaW4gYSBtZXRob2QgaGF2ZSBhIGRlc2NlbmRpbmcgZGVmYXVsdCBzZWFyY2ggb3JkZXIpLiBUbyBzb3J0IHRoZSBlbnRpdGllcyBpbiBhIHNwZWNpZmljXG4gICAgICogb3JkZXIsIHlvdSBjYW4gdXNlIHRoZSBcIkFTQ1wiIGFuZCBcIkRFU0NcIiBrZXl3b3JkcyBmb3IgYW55IGZpZWxkLlxuICAgICAqL1xuICAgIG9yZGVyQnk/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIGZpZWxkIG5hbWVzLiBZb3UgY2FuIHVzZSB0aGlzIHBhcmFtZXRlciB0byByZXN0cmljdCB0aGUgZmllbGRzIHJldHVybmVkIHdpdGhpblxuICAgICAqIGEgcmVzcG9uc2UgaWYsIGZvciBleGFtcGxlLCB5b3Ugd2FudCB0byBzYXZlIG9uIG92ZXJhbGwgYmFuZHdpZHRoLiBUaGUgbGlzdCBhcHBsaWVzIHRvIGFcbiAgICAgKiByZXR1cm5lZCBpbmRpdmlkdWFsIGVudGl0eSBvciBlbnRyaWVzIHdpdGhpbiBhIGNvbGxlY3Rpb24uIElmIHRoZSBBUEkgbWV0aG9kIGFsc28gc3VwcG9ydHNcbiAgICAgKiB0aGUgYGluY2x1ZGVgIHBhcmFtZXRlciwgdGhlbiB0aGUgZmllbGRzIHNwZWNpZmllZCBpbiB0aGUgaW5jbHVkZSBwYXJhbWV0ZXIgYXJlIHJldHVybmVkIGluXG4gICAgICogYWRkaXRpb24gdG8gdGhvc2Ugc3BlY2lmaWVkIGluIHRoZSBmaWVsZHMgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIGZpZWxkcz86IHN0cmluZ1tdO1xufVxuIl19